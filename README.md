# Fieldr

Generator of various enumerated constants, types, functions based on structure fields and their tags.

## Supported commands

* enum-const - generate constants based on template applied to struct fields.
* as-map - generates method or functon that converts the struct type to a map.
* builder - generates builder API of a structure type.

## Installation

```bash
go install github.com/m4gshm/fieldr@latest
```
or
```bash
go install github.com/m4gshm/fieldr@HEAD
```
## Enum constant example

create a file `entity.go` with the below content:

```go
package enum_const

//go:generate fieldr -type Entity enum-const -val .json -list jsons
type Entity struct {
    Id   int    `json:"id"`
    Name string `json:"name"`
}
```

then running this command in the same directory:

```bash script
go generate .
```

will be generated `entity_fieldr.go` file with the next content:

```go
// Code generated by 'fieldr'; DO NOT EDIT.

package enum_const

const (
    entityJsonId   = "id"
    entityJsonName = "name"
)

func jsons() []string { return []string{entityJsonId, entityJsonName} }
```

this consist of constants based on the `json` tag contents and the method `jsons` that enumerates these constants.

To get extended help of the command, use the following:

```bash
fieldr enum-const --help
```

## Builder usage example

source `entity.go`
```go
package builder

//go:generate fieldr -type Entity builder
type Entity struct {
    Id   int
    Name string
}
```

```bash script
go generate .
```

generated `entity_fieldr.go`
```go
// Code generated by 'fieldr'; DO NOT EDIT.

package builder

type EntityBuilder struct {
	id   int
	name string
}

func (b EntityBuilder) Build() *Entity {
	return &Entity{
		Id:   b.id,
		Name: b.name,
	}
}

func (b *EntityBuilder) Id(id int) *EntityBuilder {
	b.id = id
	return b
}

func (b *EntityBuilder) Name(name string) *EntityBuilder {
	b.name = name
	return b
}

func (i *Entity) ToBuilder() *EntityBuilder {
	if i == nil {
		return &EntityBuilder{}
	}
	return &EntityBuilder{
		id:   i.Id,
		name: i.Name,
	}
}
```


 See more examples [here](./examples/)